<div class="container-fluid d-flex" style="background-color: #D9D9D9;">
    <div class="sideMenu">
        <a href="/admin"><button type="button" class="btn btn-light sideMenuButton" ><i class="bi bi-view-list"></i> <span class="menuLabel"> Dashboard</span></button></a>
        <a href="/admin/customers"><button type="button" class="btn btn-light sideMenuButton"><i class="bi bi-people-fill"></i><span class="menuLabel"> Customers</span></button></a>
        <a href="/admin/products"><button type="button" class="btn btn-light sideMenuButton"><i class="bi bi-box-seam-fill"></i><span class="menuLabel"> Products</span></button></a>
        <a href="/admin/orders"><button type="button" class="btn btn-light sideMenuButton"><i class="bi bi-receipt"></i><span class="menuLabel"> Orders</span></button></a>
        <a href=""><button type="button" class="btn btn-light sideMenuButton"><i class="bi bi-card-image"></i><span class="menuLabel"> Banner Management</span></button></a>
        <a href=""><button type="button" class="btn btn-light sideMenuButton"><i class="bi bi-ticket-perforated-fill"></i><span class="menuLabel"> Coupen Management</span></button></a>
        <a href=""><button type="button" class="btn btn-light sideMenuButton"><i class="bi bi-journal-bookmark"></i><span class="menuLabel"> Sales Report</span></button></a>
        <a href="/admin/category"><button type="button" class="btn btn-light sideMenuButton"><i class="bi bi-collection-fill"></i><span class="menuLabel"> Catagory</span></button></a>
        <dir class="separator mt-5 pt-5"></dir>
        <a href=""><button type="button" class="btn btn-light sideMenuButton"><i class="bi bi-gear"></i><span class="menuLabel"> Settings</span></button></a>
        <a href="/admin/logout"><button type="button" class="btn btn-light sideMenuButton"><i class="bi bi-box-arrow-right"></i><span class="menuLabel"> Logout</span></button></a>
    </div>
    <div class="orderDetails d-flex justify-content-center" style="width: 80%;">
        <section class="content-main" style="width: 90%;">
            <div class="content-header">
                <div>
                    <h2 class="content-title card-title my-5">Order List </h2>
                </div>
            </div>
            <div class="card mb-4">
                {{!-- <header class="card-header">
                    <div class="row gx-3">
                        <div class="col-lg-4 col-md-6 me-auto">
                            <input type="text" placeholder="Search..." class="form-control">
                        </div>
                        <div class="col-lg-2 col-6 col-md-3">
                            <select class="form-select">
                                <option>Status</option>
                                <option>Active</option>
                                <option>Disabled</option>
                                <option>Show all</option>
                            </select>
                        </div>
                        <div class="col-lg-2 col-6 col-md-3">
                            <select class="form-select">
                                <option>Show 20</option>
                                <option>Show 30</option>
                                <option>Show 40</option>
                            </select>
                        </div>
                    </div>
                </header> <!-- card-header end// --> --}}
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover" >
                            <thead>
                                <tr>
                                    <th scope="col">Name</th>
                                    <th scope="col">Mobile Number</th>
                                    <th scope="col">Total</th>
                                    <th scope="col">Payment Method</th>
                                    <th scope="col">Payment Status</th>
                                    {{!-- <th scope="col">Order Status</th> --}}
                                    <th scope="col">Date and Time</th>
                                    <th scope="col" class="text-center"> Action </th>
                                </tr>
                            </thead>
                            <tbody>
                                {{#each orders}}
                                <tr>
                                    <td><b>{{this.name}}</b></td>
                                    <td>{{this.mobileNumber}}</td>
                                    <td>Rs. {{this.totalPrice}}</td>
                                    <td>{{this.paymentMethod}}</td>
                                    <td>{{this.paymentStatus}}</td>
                                    {{!-- <td><select class="form-select" name="orderStatus" id="orderStatus" onchange="updateOrderStatus(event,'{{this._id}}')">
                                            <option value="{{this.orderStatus}}" selected >{{this.orderStatus}}</option>
                                            <option value="placed" >placed</option>
                                            <option value="shipped" >shipped</option>
                                            <option value="delivered" >delivered</option>
                                            <option value="cancelled" >cancelled</option>
                                        </select>
                                    </td> --}}
                                    <td>{{this.date}}</td>
                                    <td class="text-end d-flex justify-content-end" style="text-align: right;">
                                        <a href="/admin/orderDetails/{{this._id}}" class="btn btn-info btn-sm rounded me-3">Details</a>
                                        {{!-- <div class="dropdown">
                                            <a href="#" data-bs-toggle="dropdown" class="btn btn-warning rounded btn-sm font-sm"> <i class="bi bi-three-dots"></i> </a>
                                            <div class="dropdown-menu">
                                                <a class="dropdown-item" href="/admin/editStatus/{{this._id}}">Update Status</a>
                                                <a class="dropdown-item text-danger" href="#">Delete</a>
                                            </div>
                                        </div> <!-- dropdown //end --> --}}
                                    </td>
                                </tr>
                                {{/each}}
                            </tbody>
                        </table>
                    </div> <!-- table-responsive //end -->
                </div> <!-- card-body end// -->
            </div> <!-- card end// -->
            {{!-- <div class="pagination-area mt-15 mb-50">
                <nav aria-label="Page navigation example">
                    <ul class="pagination justify-content-start">
                        <li class="page-item active"><a class="page-link" href="#">01</a></li>
                        <li class="page-item"><a class="page-link" href="#">02</a></li>
                        <li class="page-item"><a class="page-link" href="#">03</a></li>
                        <li class="page-item"><a class="page-link dot" href="#">...</a></li>
                        <li class="page-item"><a class="page-link" href="#">16</a></li>
                        <li class="page-item"><a class="page-link" href="#"><i class="material-icons md-chevron_right"></i></a></li>
                    </ul>
                </nav>
            </div> --}}
        </section>
</div>

<script>
    function updateOrderStatus(event,id){
        {{!-- console.log("function called");
        console.log("event - ",event); --}}
        console.log("id - ",id);
        const selectedValue = event.target.value;
        console.log(selectedValue);
        const data = {value:selectedValue,orderId:id}
        fetch('/admin/updateOrderStatus',{
            method:'POST',
            headers: {
                'Content-Type':'application/json'
            },
            body:JSON.stringify(data)
        })
        .then(response => {
            console.log("response.json:",response.json())
            response.json();
            location.reload();
        })
    }
</script>